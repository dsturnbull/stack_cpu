%define	INPUT	0x10
%define	WORDS	0x40

%import	"progs/util.asmr"
%import	"progs/word_dict.asmr"

_main:
	push	_prompt
	call

	; read a line and store at INPUT
	push	INPUT
	push	_read_line
	call

	; parse the string at INPUT
	push	INPUT
	push	_parse_str
	call

	ret

_parse_str:
	; push words
	dup
	load
	push	0x3a
	sub
	push	_add_word
	jz

	; exec word

	pop
	ret

_prompt:
	push	0x3e
	out
	push	0x20
	out
	ret

_ok:
	push	0x6f
	out
	push	0x6b
	out
	ret

